import{Y as we,c as a,q as Je,o as Ke,s as ne,a9 as Rt,i as ae,_ as i,E as Ce,r as l,p as Xe,l as Ze,m as j,n as et,I as It,V as Dt,J as Ot,W as $t,ap as Mt,v as St,$ as qe,aq as ee,j as k,a7 as Lt,a as At,ao as Bt,b as Ge,B as C,L as _t,d as te,ai as Ut,T as be,aj as Ft,e as Te,ab as zt,ar as Et}from"./index-4b98aa60.js";import{C as Wt}from"./Card-e745718f.js";import{b as Ht,F as Qe,a as Ye,S as Vt}from"./Switch-0b4bb37c.js";import{l as tt,D as jt}from"./DatePicker-94f39176.js";import{T as qt}from"./TimePicker-22cedb2b.js";import"./InputAdornment-39d9477e.js";const Gt=we(a("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Qt=we(a("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Yt=we(a("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Jt(e){return Ke("MuiCheckbox",e)}const Kt=Je("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),ge=Kt,Xt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Zt=e=>{const{classes:t,indeterminate:s,color:m}=e,b={root:["root",s&&"indeterminate",`color${ae(m)}`]},o=et(b,Jt,t);return i({},t,o)},eo=ne(Ht,{shouldForwardProp:e=>Rt(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.indeterminate&&t.indeterminate,s.color!=="default"&&t[`color${ae(s.color)}`]]}})(({theme:e,ownerState:t})=>i({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ce(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${ge.checked}, &.${ge.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${ge.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),to=a(Qt,{}),oo=a(Gt,{}),ro=a(Yt,{}),no=l.forwardRef(function(t,s){var m,b;const o=Xe({props:t,name:"MuiCheckbox"}),{checkedIcon:g=to,color:L="primary",icon:A=oo,indeterminate:h=!1,indeterminateIcon:c=ro,inputProps:T,size:y="medium",className:B}=o,_=Ze(o,Xt),I=h?c:A,x=h?c:g,D=i({},o,{color:L,indeterminate:h,size:y}),O=Zt(D);return a(eo,i({type:"checkbox",inputProps:i({"data-indeterminate":h},T),icon:l.cloneElement(I,{fontSize:(m=I.props.fontSize)!=null?m:y}),checkedIcon:l.cloneElement(x,{fontSize:(b=x.props.fontSize)!=null?b:y}),ownerState:D,ref:s,className:j(O.root,B)},_,{classes:O}))}),ao=no;function so(e){return Ke("MuiTooltip",e)}const io=Je("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),R=io,lo=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function co(e){return Math.round(e*1e5)/1e5}const po=e=>{const{classes:t,disableInteractive:s,arrow:m,touch:b,placement:o}=e,g={popper:["popper",!s&&"popperInteractive",m&&"popperArrow"],tooltip:["tooltip",m&&"tooltipArrow",b&&"touch",`tooltipPlacement${ae(o.split("-")[0])}`],arrow:["arrow"]};return et(g,so,t)},uo=ne(tt,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.popper,!s.disableInteractive&&t.popperInteractive,s.arrow&&t.popperArrow,!s.open&&t.popperClose]}})(({theme:e,ownerState:t,open:s})=>i({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!s&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${R.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${R.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${R.arrow}`]:i({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${R.arrow}`]:i({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),mo=ne("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.tooltip,s.touch&&t.touch,s.arrow&&t.tooltipArrow,t[`tooltipPlacement${ae(s.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>i({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Ce(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${co(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${R.popper}[data-popper-placement*="left"] &`]:i({transformOrigin:"right center"},t.isRtl?i({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):i({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${R.popper}[data-popper-placement*="right"] &`]:i({transformOrigin:"left center"},t.isRtl?i({marginRight:"14px"},t.touch&&{marginRight:"24px"}):i({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${R.popper}[data-popper-placement*="top"] &`]:i({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${R.popper}[data-popper-placement*="bottom"] &`]:i({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),ho=ne("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Ce(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let oe=!1,ve=null;function re(e,t){return s=>{t&&t(s),e(s)}}const fo=l.forwardRef(function(t,s){var m,b,o,g,L,A,h,c,T,y,B,_,I,x,D,O,P,q,G;const r=Xe({props:t,name:"MuiTooltip"}),{arrow:p=!1,children:u,components:N={},componentsProps:v={},describeChild:ot=!1,disableFocusListener:rt=!1,disableHoverListener:ke=!1,disableInteractive:nt=!1,disableTouchListener:at=!1,enterDelay:ye=100,enterNextDelay:xe=0,enterTouchDelay:st=700,followCursor:se=!1,id:it,leaveDelay:Pe=0,leaveTouchDelay:lt=1500,onClose:Ne,onOpen:Re,open:ct,placement:Ie="bottom",PopperComponent:ie,PopperProps:$={},slotProps:M={},slots:Q={},title:U,TransitionComponent:pt=qe,TransitionProps:ut}=r,De=Ze(r,lo),le=It(),dt=le.direction==="rtl",[F,Oe]=l.useState(),[ce,mt]=l.useState(null),Y=l.useRef(!1),pe=nt||se,J=l.useRef(),K=l.useRef(),S=l.useRef(),$e=l.useRef(),[ht,Me]=Dt({controlled:ct,default:!1,name:"Tooltip",state:"open"});let w=ht;const ue=Ot(it),z=l.useRef(),X=l.useCallback(()=>{z.current!==void 0&&(document.body.style.WebkitUserSelect=z.current,z.current=void 0),clearTimeout($e.current)},[]);l.useEffect(()=>()=>{clearTimeout(J.current),clearTimeout(K.current),clearTimeout(S.current),X()},[X]);const Se=n=>{clearTimeout(ve),oe=!0,Me(!0),Re&&!w&&Re(n)},Z=$t(n=>{clearTimeout(ve),ve=setTimeout(()=>{oe=!1},800+Pe),Me(!1),Ne&&w&&Ne(n),clearTimeout(J.current),J.current=setTimeout(()=>{Y.current=!1},le.transitions.duration.shortest)}),de=n=>{Y.current&&n.type!=="touchstart"||(F&&F.removeAttribute("title"),clearTimeout(K.current),clearTimeout(S.current),ye||oe&&xe?K.current=setTimeout(()=>{Se(n)},oe?xe:ye):Se(n))},Le=n=>{clearTimeout(K.current),clearTimeout(S.current),S.current=setTimeout(()=>{Z(n)},Pe)},{isFocusVisibleRef:Ae,onBlur:ft,onFocus:bt,ref:Tt}=Mt(),[,Be]=l.useState(!1),_e=n=>{ft(n),Ae.current===!1&&(Be(!1),Le(n))},Ue=n=>{F||Oe(n.currentTarget),bt(n),Ae.current===!0&&(Be(!0),de(n))},Fe=n=>{Y.current=!0;const d=u.props;d.onTouchStart&&d.onTouchStart(n)},ze=de,Ee=Le,gt=n=>{Fe(n),clearTimeout(S.current),clearTimeout(J.current),X(),z.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",$e.current=setTimeout(()=>{document.body.style.WebkitUserSelect=z.current,de(n)},st)},vt=n=>{u.props.onTouchEnd&&u.props.onTouchEnd(n),X(),clearTimeout(S.current),S.current=setTimeout(()=>{Z(n)},lt)};l.useEffect(()=>{if(!w)return;function n(d){(d.key==="Escape"||d.key==="Esc")&&Z(d)}return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[Z,w]);const wt=St(u.ref,Tt,Oe,s);!U&&U!==0&&(w=!1);const E=l.useRef({x:0,y:0}),me=l.useRef(),Ct=n=>{const d=u.props;d.onMouseMove&&d.onMouseMove(n),E.current={x:n.clientX,y:n.clientY},me.current&&me.current.update()},W={},he=typeof U=="string";ot?(W.title=!w&&he&&!ke?U:null,W["aria-describedby"]=w?ue:null):(W["aria-label"]=he?U:null,W["aria-labelledby"]=w&&!he?ue:null);const f=i({},W,De,u.props,{className:j(De.className,u.props.className),onTouchStart:Fe,ref:wt},se?{onMouseMove:Ct}:{}),H={};at||(f.onTouchStart=gt,f.onTouchEnd=vt),ke||(f.onMouseOver=re(ze,f.onMouseOver),f.onMouseLeave=re(Ee,f.onMouseLeave),pe||(H.onMouseOver=ze,H.onMouseLeave=Ee)),rt||(f.onFocus=re(Ue,f.onFocus),f.onBlur=re(_e,f.onBlur),pe||(H.onFocus=Ue,H.onBlur=_e));const kt=l.useMemo(()=>{var n;let d=[{name:"arrow",enabled:Boolean(ce),options:{element:ce,padding:4}}];return(n=$.popperOptions)!=null&&n.modifiers&&(d=d.concat($.popperOptions.modifiers)),i({},$.popperOptions,{modifiers:d})},[ce,$]),V=i({},r,{isRtl:dt,arrow:p,disableInteractive:pe,placement:Ie,PopperComponentProp:ie,touch:Y.current}),fe=po(V),We=(m=(b=Q.popper)!=null?b:N.Popper)!=null?m:uo,He=(o=(g=(L=Q.transition)!=null?L:N.Transition)!=null?g:pt)!=null?o:qe,Ve=(A=(h=Q.tooltip)!=null?h:N.Tooltip)!=null?A:mo,je=(c=(T=Q.arrow)!=null?T:N.Arrow)!=null?c:ho,yt=ee(We,i({},$,(y=M.popper)!=null?y:v.popper,{className:j(fe.popper,$==null?void 0:$.className,(B=(_=M.popper)!=null?_:v.popper)==null?void 0:B.className)}),V),xt=ee(He,i({},ut,(I=M.transition)!=null?I:v.transition),V),Pt=ee(Ve,i({},(x=M.tooltip)!=null?x:v.tooltip,{className:j(fe.tooltip,(D=(O=M.tooltip)!=null?O:v.tooltip)==null?void 0:D.className)}),V),Nt=ee(je,i({},(P=M.arrow)!=null?P:v.arrow,{className:j(fe.arrow,(q=(G=M.arrow)!=null?G:v.arrow)==null?void 0:q.className)}),V);return k(l.Fragment,{children:[l.cloneElement(u,f),a(We,i({as:ie??tt,placement:Ie,anchorEl:se?{getBoundingClientRect:()=>({top:E.current.y,left:E.current.x,right:E.current.x,bottom:E.current.y,width:0,height:0})}:F,popperRef:me,open:F?w:!1,id:ue,transition:!0},H,yt,{popperOptions:kt,children:({TransitionProps:n})=>a(He,i({timeout:le.transitions.duration.shorter},n,xt,{children:k(Ve,i({},Pt,{children:[U,p?a(je,i({},Nt,{ref:mt})):null]}))}))}))]})}),bo=fo;const yo=()=>{const e=Lt(),t=At(),s=Bt(),m=e.pathname.split("/")[2],o=Ge(r=>r.habitsSlice.habitList).find(r=>r._id===m),g=l.useRef(null),L=r=>{r.target===g.current&&t("/habits")},A=Ge(r=>r.habitsSlice.habitLoading),h=o!=null&&o.time?o==null?void 0:o.time.split(":"):null,[c,T]=l.useState({addNewHabitHeader:"",habitTitle:(o==null?void 0:o.title)||"",selectedTime:h?new Date(new Date().setHours(Number(h[0]),Number(h[1]))):null,selectedDate:o!=null&&o.targetDate?new Date(o.targetDate):null,habitCreationUTCOffset:(o==null?void 0:o.creationUTCOffset)||new Date().getTimezoneOffset(),habitAlarmUsed:(o==null?void 0:o.alarmUsed)||!1}),y=(r,p)=>{T(u=>({...u,[p]:r}))},B=()=>{T(r=>({...r,habitAlarmUsed:!r.habitAlarmUsed}))},_=r=>{T(p=>({...p,selectedTime:r}))},I=r=>{T(p=>({...p,selectedDate:r}))},x=(r,p)=>{p==="archive"?s.toggleHabitArchiveStatus(r):s.deleteHabit(r),t("/habits")},D=[1,2,3,4,5,6,0],O={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",0:"Sun"},[P,q]=l.useState((o==null?void 0:o.weekdays)||{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,0:!1}),G=async r=>{r.preventDefault();let p=Object.values(P).every(N=>N===!1)?{1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,0:!0}:P;const u={title:c.habitTitle,time:c.selectedTime?new Date(new Date(c.selectedTime).setSeconds(0)).toLocaleTimeString("en-GB"):null,creationDate:(o==null?void 0:o.creationDate)||new Date().toISOString(),isArchived:(o==null?void 0:o.isArchived)||!1,weekdays:p,entries:(o==null?void 0:o.entries)||{1:null,2:null,3:null,4:null,5:null,6:null,0:null},targetDate:c.selectedDate?new Date(c.selectedDate.setHours(12+new Date().getTimezoneOffset()/-60,0,0,0)).toISOString():null,creationUTCOffset:c.habitCreationUTCOffset,alarmUsed:c.habitAlarmUsed,_id:(o==null?void 0:o._id)||""};o?s.updateHabit(u,o):s.addHabit(u),t("/habits")};return l.useEffect(()=>{if(o){const{title:r,time:p,creationUTCOffset:u,alarmUsed:N}=o;T(v=>({...v,habitTitle:r||"",selectedTime:p?new Date(new Date().setHours(Number(p.split(":")[0]),Number(p.split(":")[1]))):null,habitCreationUTCOffset:u||new Date().getTimezoneOffset(),habitAlarmUsed:N||!1}))}},[o]),a(C,{className:"opacity-transition add-new-habit-backdrop backdrop",ref:g,onClick:r=>L(r),children:A?a(_t,{height:"80vh"}):k(Wt,{component:"form",onSubmit:G,className:"add-new-habit-form scale-in",children:[k(C,{className:"add-new-habit-controls",children:[o?a(C,{className:"archive-habit-wrapper",children:k(te,{className:"archive-habit-button",variant:"outlined",onClick:()=>{x(o,"archive")},children:[a(Ut,{className:"icon-interactive archive-habit-icon"}),a(be,{className:"archive-habit-text",children:"Archive"})]})}):null,o?a(C,{className:"delete-habit-wrapper",children:k(te,{className:"delete-habit-button",variant:"outlined",onClick:()=>{x(o,"delete")},children:[a(Ft,{className:"icon-interactive delete-habit-icon"}),a(be,{className:"delete-habit-text",children:"Delete"})]})}):null]}),k(C,{className:"add-new-habit-dates",children:[a(C,{className:"add-new-habit-datepicker-wrapper",children:a(jt,{className:"focus add-new-habit-datepicker",inputFormat:"dd/MM/yyyy",label:"Target Date",desktopModeMediaQuery:"@media (min-width:769px)",renderInput:r=>a(Te,{size:"small",className:"focus date-picker",...r}),value:c.selectedDate,onChange:r=>{I(r)},componentsProps:{actionBar:{actions:["today","clear"]}}})}),a(C,{className:"add-new-habit-timepicker-wrapper",children:a(qt,{className:"focus add-new-habit-timepicker",inputFormat:"HH:mm",label:"Habit Time",ampm:!1,ampmInClock:!1,desktopModeMediaQuery:"@media (min-width:769px)",renderInput:r=>a(Te,{size:"small",...r}),value:c.selectedTime,onChange:r=>{_(r)},componentsProps:{actionBar:{actions:["clear"]}}})})]}),c.selectedTime?a(C,{className:"add-new-habit-alarm-switches",children:a(Qe,{children:a(Ye,{control:a(Vt,{checked:c.habitAlarmUsed,onChange:B}),label:"Habit alarm"})})}):null,a(Te,{value:c.habitTitle,onChange:r=>{y(r.target.value,"habitTitle")},label:"Habit Title",className:"add-new-habit-title",multiline:!0,required:!0}),k(zt,{className:"weekdays-selector",component:"fieldset",variant:"standard",children:[a(Et,{children:a(bo,{enterDelay:300,title:"Select active weekdays for habit. Leave unchecked to select all weekdays.",children:a(be,{children:"Habit Active Weekdays"})})}),a(Qe,{className:"weekdays-selector-checkboxes",children:D.map(r=>l.createElement(Ye,{className:"weekdays-selector-checkbox",checked:P[r],control:a(ao,{onClick:()=>{q({...P,[r]:!P[r]})}}),label:O[r],key:r}))})]}),k(C,{className:"add-new-habit-buttons",children:[a(te,{variant:"outlined",type:"button",className:"button",onClick:()=>{t(-1)},children:"Back"}),a(te,{variant:"outlined",type:"submit",className:"button",children:o?"Update":"Submit"})]})]})})};export{yo as default};
