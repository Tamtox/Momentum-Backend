import{a3 as N,b as h,r as C,j as n,B as i,c as t,T as g,e as l,d}from"./index-4b98aa60.js";import{L as b}from"./LoadingButton-b7be2e76.js";import{C as y}from"./Container-1dab81eb.js";import{C as S}from"./Card-e745718f.js";const H=()=>{const m=N(),p=h(e=>e.authSlice.loading),w=h(e=>e.authSlice.darkMode),[a,u]=C.useState({email:"",username:"",password:"",passwordRepeat:"",isLogin:!0,authLabel:"Sign In",authResponseLabel:"",passwordResetMode:!1,passwordResetEmail:"",passResetLabel:"Reset Password"}),o=(e,s)=>{u(r=>({...r,[s]:e}))},c=e=>{u(s=>({...s,passwordResetMode:e}))},R=()=>{u(e=>({...e,isLogin:!a.isLogin,authLabel:a.isLogin===!0?"Sign Up":"Sign In"}))},f=async e=>{if(e.preventDefault(),!a.isLogin&&a.password!==a.passwordRepeat)return o("Passwords don't match!","authResponseLabel");const s=await m.signInUp(a.email,a.password,a.isLogin,a.username);u(r=>({...r,authLabel:s}))},v=async e=>{e.preventDefault();const s=await m.resetPassword(a.passwordResetEmail);u(r=>({...r,passResetLabel:s})),setTimeout(()=>{c(!1)},1e4)};let L=a.passwordResetMode?n(i,{className:"auth-card",children:[t(g,{className:"scale-in",component:"h5",variant:"h5",children:a.passResetLabel}),n("form",{className:"auth-form scale-in",onSubmit:v,children:[t(i,{className:"auth-inputs",children:t(l,{className:"auth-input",value:a.passwordResetEmail,onChange:e=>{o(e.target.value,"passwordResetEmail")},required:!0,fullWidth:!0,label:"Enter your email",type:"email",autoComplete:"email"})}),n(i,{className:"auth-buttons",children:[t(d,{onClick:e=>{c(!1)},variant:"outlined",className:"button auth-button",children:"Back"}),p?t(b,{className:"button auth-button",loading:!0,variant:"contained"}):t(d,{type:"submit",variant:"contained",className:"button auth-button",children:"Reset"})]})]})]}):null;return t(y,{component:"main",className:"auth page",children:L||n(i,{className:`auth-card${w?"-dark":""} scale-in`,children:[t(g,{component:"h5",variant:"h5",children:a.authLabel}),n("form",{className:"auth-form",onSubmit:f,children:[n(i,{className:"auth-inputs scale-in",children:[t(l,{className:"auth-input scale-in",value:a.email,onChange:e=>{o(e.target.value,"email")},size:"medium",required:!0,fullWidth:!0,label:"Email Address",type:"email",autoComplete:"email"}),!a.isLogin&&t(l,{className:"auth-input scale-in",value:a.username,onChange:e=>{o(e.target.value,"username")},size:"medium",required:!0,fullWidth:!0,label:"Username",type:"text"}),t(l,{className:"auth-input scale-in",value:a.password,onChange:e=>{o(e.target.value,"password")},size:"medium",required:!0,fullWidth:!0,label:"Password",type:"password",autoComplete:"current-password"}),!a.isLogin&&t(l,{className:"auth-input scale-in",value:a.passwordRepeat,onChange:e=>{o(e.target.value,"passwordRepeat")},size:"medium",required:!0,fullWidth:!0,label:"Repeat Password",type:"password",autoComplete:"current-password"})]}),n(i,{className:"auth-buttons",children:[t(d,{onClick:()=>{c(!0)},variant:"outlined",className:"button auth-button",sx:{width:"fit-content"},children:"Reset Password"}),p?t(b,{className:"button auth-button",loading:!0,variant:"contained"}):t(d,{type:"submit",variant:"contained",className:"button auth-button",children:a.isLogin?"Sign In":"Sign Up"})]})]}),t(S,{className:"auth-switch",onClick:R,children:a.isLogin?"Don't have an account ?":"Use existing account"})]})})};export{H as default};
